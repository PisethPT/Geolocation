<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Iframe Content</title>
</head>
<body>
    <div id="display"></div>
    <button onclick="Geolocation()">Geolocation</button>

    <script>
        function Geolocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition, showError, {
                    enableHighAccuracy: true,
                    timeout: 5000,
                    maximumAge: 0
                });
            } else {
                alert("Geolocation is not supported by this browser.");
            }

            function showPosition(position) {
                const data = {
                    latitude: position.coords.latitude,
                    longitude: position.coords.longitude,
                    accuracy: position.coords.accuracy
                };

                document.getElementById('display').innerText = `Latitude: ${data.latitude}, Longitude: ${data.longitude}, Accuracy: ${data.accuracy}`;

                // Send data to the parent page
                window.parent.postMessage({ dataSource: JSON.stringify(data) }, '*');
            }

            function showError(error) {
                alert(`Error: ${error.message}`);
            }
        }

        // Listen for messages from the parent page
        window.addEventListener('message', (event) => {
            if (event.data && event.data.action === 'requestData') {
                // Send data back to the parent page
                Geolocation();
            }
        });
    </script>
</body>
</html>
